{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"C:/Users/arthu/OneDrive/Desktop/Important/daser/next/test/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\arthu\\\\OneDrive\\\\Desktop\\\\Important\\\\daser\\\\next\\\\test\\\\Components\\\\UI\\\\Input\\\\index.jsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState, useRef, useMemo, useCallback, useLayoutEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport UseStyles from './styles';\nimport variablesJSS from \"static/styles/jss/variables\";\nimport TextField from \"@material-ui/core/TextField\";\nimport { UiGenerateMargin, UIGetMarginLeftRight } from 'utils/handlers';\nvar canUseDOM = true;\nReact.useLayoutEffect = canUseDOM ? useLayoutEffect : useEffect;\n\nvar Input = function Input(props) {\n  _s();\n\n  var _useState = useState({}),\n      inputStyleProps = _useState[0],\n      setInputStyleProps = _useState[1];\n\n  var _useState2 = useState(null),\n      inputRef = _useState2[0],\n      setInputRef = _useState2[1];\n\n  var _useState3 = useState(0),\n      limitCount = _useState3[0],\n      setLimitCount = _useState3[1];\n\n  var _useState4 = useState({}),\n      icon = _useState4[0],\n      setIcon = _useState4[1];\n\n  var _useState5 = useState(false),\n      passwordTypeToggle = _useState5[0],\n      setPasswordTypeToggle = _useState5[1];\n\n  var styles = UseStyles(inputStyleProps, {\n    link: true\n  });\n  var parentRef = useRef();\n  var errorRef = useRef();\n  var bottomWrapRef = useRef();\n  var labelRef = useRef();\n  var inputWrapperRef = useRef();\n  useLayoutEffect(function () {\n    // Set Inline Styles and send to JSS\n    setInputStyleProps(_objectSpread(_objectSpread({}, inputStyleProps), {}, {\n      backgroundColor: [props.customStylesInput.background, '!important'],\n      border: props.customStylesInput.border,\n      labelColor: props.label && props.label.color || variablesJSS.$input.$baseColor,\n      iconTop: calculateIconPosition() - variablesJSS.$input.$iconSize / 2 + 'px',\n      marginBottom: calculateMarginBottom()\n    }));\n  }, [props.customStylesInput, props.errors, props.label, labelRef.current, errorRef.current, bottomWrapRef.current, icon, props.textArea, props.helperText, props.maxCounter, props.transparentInput, props.required]);\n  useEffect(function () {\n    // Find and Set ref of Input/Textarea element\n    if (parentRef.current) {\n      setInputRef(parentRef.current.querySelector(props.textArea ? 'textarea' : 'input'));\n    }\n  }, [parentRef.current, props]);\n  useEffect(function () {\n    // Set/Remove events\n    if (parentRef.current && inputRef) {\n      setAttributes();\n\n      for (var event = 0; event < props.events.length; event++) {\n        // Add Event Listeners\n        inputRef.addEventListener(props.events[event], props['on' + props.events[event].replace(props.events[event].charAt(0), props.events[event].charAt(0).toUpperCase())]);\n      }\n    }\n\n    return function () {\n      if (parentRef.current && inputRef) {\n        // Remove Event Listeners\n        for (var _event = 0; _event < props.events.length; _event++) {\n          inputRef.removeEventListener(props.events[_event], props['on' + props.events[_event].replace(props.events[_event].charAt(0), props.events[_event].charAt(0).toUpperCase())]);\n        }\n      }\n    };\n  }, [props.events, inputRef]);\n  useEffect(function () {\n    // Value Override\n    if (inputRef && !!props.value) {\n      inputRef.value = props.value;\n    }\n  }, [props.value, inputRef]);\n  useEffect(function () {\n    if (parentRef.current) setAttributes();\n  }, [props.attr, inputRef]);\n  useEffect(function () {\n    if (props.value) {\n      setLimitCount(String(props.value).length);\n    }\n\n    if (props.maxCounter && inputRef) {\n      inputRef.setAttribute('maxlength', props.maxCounter);\n      inputRef.addEventListener('keyup', counterCalculator);\n    }\n\n    return function () {\n      inputRef && inputRef.removeEventListener('keyup', counterCalculator);\n    };\n  }, [props.maxCounter, props.value, inputRef]);\n  useEffect(function () {\n    // Set Icon\n    if (props.readonly) {\n      setIcon({\n        className: 'icon-lock'\n      });\n    } else if (props.errors) {\n      setIcon({\n        className: 'error-icon icon-warning'\n      });\n    } else if (props.type === 'password' && props.passwordEye) {\n      setIcon({\n        className: 'icon-eye toggle-password' + (passwordTypeToggle ? ' icon-eye-blocked' : ''),\n        onClick: togglePassword\n      });\n    } else if (props.icon) {\n      setIcon(_objectSpread({\n        className: props.icon.className + (props.icon.onClick ? ' clickable' : '')\n      }, props.icon.onClick && {\n        onClick: props.icon.onClick\n      }));\n    } else {\n      setIcon({});\n    }\n  }, [props.passwordEye, props.type, props.icon, props.errors, passwordTypeToggle, props.readonly]);\n  var togglePassword = useCallback(function () {\n    // Toggle Password Eye Icon\n    setPasswordTypeToggle(!passwordTypeToggle);\n  }, [props.passwordEye, passwordTypeToggle]);\n  var calculateMarginBottom = useCallback(function () {\n    // Calculate Margin Bottom\n    var bottomElementHeight = errorRef.current ? errorRef.current.offsetHeight + 2 : bottomWrapRef.current ? bottomWrapRef.current.offsetHeight + 2 : 0;\n    return bottomElementHeight\n    /*marginTopBottom*/\n    - (props.transparentInput ? variablesJSS.$input.$transparentInput.$errorDefaultHeight - 4 : 0) + 'px';\n  }, [props.required, props.errors, props.transparentInput, errorRef.current, props.helperText, props.maxCounter, bottomWrapRef.current]);\n  var calculateIconPosition = useCallback(function () {\n    // Calculate Icon's position\n    if (inputRef) {\n      return inputRef.offsetTop + (props.textArea ? 12\n      /*TextArea's middle padding*/\n      : inputRef.offsetHeight / 2);\n    }\n  }, [props.errors, inputRef, props.label, icon, props.textArea, props.transparentInput]);\n  var setAttributes = useCallback(function () {\n    // Set all attributes\n    if (props.attr && inputRef) {\n      Object.keys(props.attr).map(function (name) {\n        inputRef.setAttribute(name, props.attr[name]);\n      });\n    }\n  }, [props.attr, props.textArea, inputRef]);\n  var counterCalculator = useCallback(function () {\n    // Count the limited characters\n    setLimitCount(inputRef.value.length);\n  }, [inputRef]); // Get position of main Wrapper\n\n  var generateMarginDiv = useCallback(function () {\n    return UiGenerateMargin(props.margin, props.direction);\n  }, [props.direction, props.margin]);\n  var inlineStylesParent = useMemo(function () {\n    // Set inline styles on the main Wrapper\n    return _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, generateMarginDiv()), {}, {\n      width: props.fullWidth ? \"calc(100% - \".concat(UIGetMarginLeftRight(props.margin), \"px)\") : props.width\n    }, props.label && {\n      display: 'flex',\n      flexDirection: 'column'\n    }), !props.label && {\n      display: 'block'\n    }), props.customStylesDiv);\n  }, [props.customStylesDiv, props.label, props.fullWidth, props.direction, props.width, props.margin]);\n  var icons = useMemo(function () {\n    if (icon.className) return /*#__PURE__*/_jsxDEV(\"i\", {\n      className: \"\".concat(icon.className, \" input-icon\"),\n      onClick: icon.onClick\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 13\n    }, _this);\n  }, [props.icon, icon]);\n  var generateClassNameParent = useMemo(function () {\n    return \"\".concat(props.className, \" \").concat(props.likeMaterialInput ? 'material-input-wrapper' : '', \" \").concat(props.transparentInput ? styles['transparent-input-wrap'] : '', \" \").concat(styles[props.theme ? 'theme-' + props.theme : ''], \" \").concat(styles['input-wrap'], \" \").concat(icon.className ? styles['with-icon'] : '', \" \").concat(props.errors ? 'error-field' : '', \" \").concat(props.type === \"checkbox\" ? styles['wrap-with-checkbox'] : props.type === \"radio\" ? styles['wrap-with-radio'] : '');\n  }, [props.type, props.errors, props.theme, props.transparentInput, props.className, icon]);\n  var label = useMemo(function () {\n    if (props.label) {\n      var textLabel = props.label.title + (props.required ? ' *' : '');\n\n      if ((props.type === 'radio' || props.type === 'checkbox') && inputRef && inputWrapperRef.current && labelRef.current) {\n        labelRef.current.innerHTML = textLabel;\n        inputWrapperRef.current.innerHTML = '';\n        var checkBoxWrap = document.createElement('SPAN');\n        checkBoxWrap.className = 'checkbox-wrap';\n        inputWrapperRef.current.appendChild(inputRef);\n        inputWrapperRef.current.appendChild(checkBoxWrap);\n        labelRef.current.appendChild(inputWrapperRef.current);\n      }\n\n      return /*#__PURE__*/_jsxDEV(\"label\", {\n        ref: labelRef,\n        htmlFor: props.type === \"checkbox\" ? props.name : null,\n        className: 'label-' + props.size,\n        children: textLabel\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 17\n      }, _this);\n    }\n  }, [props.required, props.label, inputWrapperRef.current, inputRef]);\n  var bottomWrap = useMemo(function () {\n    if ((props.maxCounter || props.helperText || props.required) && !props.errors) {\n      var text = props.helperText || (props.required ? 'Required *' : '');\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bottom-wrap\",\n        ref: bottomWrapRef,\n        children: [text && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"helper-text\",\n          children: text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 30\n        }, _this), props.maxCounter && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"counter\",\n          children: [limitCount, \"/\", props.maxCounter]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 42\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 17\n      }, _this);\n    } else if (props.errors) return /*#__PURE__*/_jsxDEV(\"span\", {\n      ref: errorRef,\n      className: 'error-line',\n      children: props.errors\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 13\n    }, _this);\n  }, [props.helperText, props.errors, props.maxCounter, errorRef, limitCount, props.required]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: inlineStylesParent,\n    className: generateClassNameParent,\n    ref: parentRef,\n    children: [label, /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: inputWrapperRef,\n      className: 'input-element-wrapper',\n      children: [props.textArea ? /*#__PURE__*/_jsxDEV(\"textarea\", {\n        name: props.name,\n        cols: props.textArea.cols || 30,\n        rows: props.textArea.rows || 5,\n        className: 'textarea-' + props.size,\n        style: props.customStylesInput,\n        ref: props.refBind,\n        placeholder: props.placeholder || 'Input text...',\n        readOnly: props.readonly,\n        tabIndex: props.readonly ? -1 : 0\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 35\n      }, _this) : props.likeMaterialInput ? /*#__PURE__*/_jsxDEV(TextField, {\n        readOnly: props.readonly,\n        disabled: props.disabled,\n        placeholder: props.placeholder || '',\n        className: 'input-' + props.size,\n        ref: props.refBind,\n        type: props.type,\n        name: props.name,\n        style: props.customStylesInput\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 58\n      }, _this) : /*#__PURE__*/_jsxDEV(\"input\", {\n        tabIndex: props.readonly ? -1 : 0,\n        readOnly: props.readonly,\n        style: props.customStylesInput,\n        name: props.name,\n        className: 'input-' + props.size,\n        ref: props.refBind,\n        type: passwordTypeToggle && 'text' || props.type,\n        id: props.type === \"checkbox\" ? props.name : props.id,\n        disabled: props.disabled,\n        placeholder: props.placeholder || ''\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 22\n      }, _this), icons]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 13\n    }, _this), bottomWrap]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 220,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(Input, \"x5MS2nSlzKt07LHXO9xDOo7gXTc=\");\n\n_c = Input;\nInput.defaultProps = {\n  size: 'md',\n  type: 'text',\n  fullWidth: false,\n  events: [],\n  margin: 0,\n  required: false,\n  readonly: false,\n  transparentInput: false,\n  theme: 'light',\n  customStylesInput: {},\n  customStylesDiv: {},\n  className: ''\n};\nInput.propTypes = {\n  className: PropTypes.string,\n  theme: PropTypes.string,\n  readonly: PropTypes.bool,\n  likeMaterialInput: PropTypes.bool,\n  transparentInput: PropTypes.bool,\n  helperText: PropTypes.string,\n  direction: PropTypes.string,\n  textArea: PropTypes.object,\n  required: PropTypes.bool,\n  passwordEye: PropTypes.bool,\n  fullWidth: PropTypes.bool,\n  maxCounter: PropTypes.number,\n  size: PropTypes.string,\n  id: PropTypes.string,\n  refBind: PropTypes.any,\n  name: PropTypes.string,\n  label: PropTypes.object,\n  type: PropTypes.string,\n  width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  errors: PropTypes.string,\n  disabled: PropTypes.bool,\n  events: PropTypes.array,\n  icon: PropTypes.object,\n  customStylesDiv: PropTypes.object,\n  customStylesInput: PropTypes.object,\n  margin: PropTypes.oneOfType([PropTypes.array, PropTypes.number]),\n  attr: PropTypes.object,\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  placeholder: PropTypes.string\n};\nexport default _c2 = /*#__PURE__*/React.memo(Input);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Input\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["C:/Users/arthu/OneDrive/Desktop/Important/daser/next/test/Components/UI/Input/index.jsx"],"names":["React","useEffect","useState","useRef","useMemo","useCallback","useLayoutEffect","PropTypes","UseStyles","variablesJSS","TextField","UiGenerateMargin","UIGetMarginLeftRight","canUseDOM","Input","props","inputStyleProps","setInputStyleProps","inputRef","setInputRef","limitCount","setLimitCount","icon","setIcon","passwordTypeToggle","setPasswordTypeToggle","styles","link","parentRef","errorRef","bottomWrapRef","labelRef","inputWrapperRef","backgroundColor","customStylesInput","background","border","labelColor","label","color","$input","$baseColor","iconTop","calculateIconPosition","$iconSize","marginBottom","calculateMarginBottom","errors","current","textArea","helperText","maxCounter","transparentInput","required","querySelector","setAttributes","event","events","length","addEventListener","replace","charAt","toUpperCase","removeEventListener","value","attr","String","setAttribute","counterCalculator","readonly","className","type","passwordEye","onClick","togglePassword","bottomElementHeight","offsetHeight","$transparentInput","$errorDefaultHeight","offsetTop","Object","keys","map","name","generateMarginDiv","margin","direction","inlineStylesParent","width","fullWidth","display","flexDirection","customStylesDiv","icons","generateClassNameParent","likeMaterialInput","theme","textLabel","title","innerHTML","checkBoxWrap","document","createElement","appendChild","size","bottomWrap","text","cols","rows","refBind","placeholder","disabled","id","defaultProps","propTypes","string","bool","object","number","any","oneOfType","array","memo"],"mappings":"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","sourcesContent":["import React, {useEffect, useState, useRef, useMemo, useCallback, useLayoutEffect} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport UseStyles from './styles';\r\nimport variablesJSS from \"static/styles/jss/variables\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport { UiGenerateMargin, UIGetMarginLeftRight } from 'utils/handlers';\r\nconst canUseDOM = (typeof window !== 'undefined');\r\nReact.useLayoutEffect = canUseDOM ? useLayoutEffect : useEffect;\r\n\r\nconst Input = (props) => {\r\n    const [inputStyleProps, setInputStyleProps] = useState({});\r\n    const [inputRef, setInputRef] = useState(null);\r\n    const [limitCount, setLimitCount] = useState(0);\r\n    const [icon, setIcon] = useState({});\r\n    const [passwordTypeToggle, setPasswordTypeToggle] = useState(false);\r\n    const styles = UseStyles(inputStyleProps, {link: true});\r\n    const parentRef = useRef();\r\n    const errorRef = useRef();\r\n    const bottomWrapRef = useRef();\r\n    const labelRef = useRef();\r\n    const inputWrapperRef = useRef();\r\n\r\n\r\n    useLayoutEffect(() => { // Set Inline Styles and send to JSS\r\n        setInputStyleProps({\r\n            ...inputStyleProps,\r\n            backgroundColor: [props.customStylesInput.background, '!important'],\r\n            border: props.customStylesInput.border,\r\n            labelColor: props.label && props.label.color || variablesJSS.$input.$baseColor,\r\n            iconTop: (calculateIconPosition() - variablesJSS.$input.$iconSize / 2) + 'px',\r\n            marginBottom: calculateMarginBottom(),\r\n        })\r\n    }, [\r\n        props.customStylesInput,\r\n        props.errors,\r\n        props.label,\r\n        labelRef.current,\r\n        errorRef.current,\r\n        bottomWrapRef.current,\r\n        icon,\r\n        props.textArea,\r\n        props.helperText,\r\n        props.maxCounter,\r\n        props.transparentInput,\r\n        props.required])\r\n\r\n    useEffect(() => { // Find and Set ref of Input/Textarea element\r\n        if (parentRef.current) {\r\n            setInputRef(parentRef.current.querySelector(props.textArea? 'textarea' : 'input'))\r\n        }\r\n    }, [parentRef.current, props])\r\n\r\n    useEffect(() => { // Set/Remove events\r\n        if (parentRef.current && inputRef) {\r\n            setAttributes();\r\n            for (let event = 0; event < props.events.length; event++) { // Add Event Listeners\r\n                inputRef.addEventListener(\r\n                    props.events[event],\r\n                    props['on' + props.events[event].replace(props.events[event].charAt(0), props.events[event].charAt(0).toUpperCase())]);\r\n            }\r\n        }\r\n        return () => {\r\n            if (parentRef.current && inputRef) { // Remove Event Listeners\r\n                for (let event = 0; event < props.events.length; event++) {\r\n                    inputRef.removeEventListener(\r\n                        props.events[event],\r\n                        props['on' + props.events[event].replace(props.events[event].charAt(0), props.events[event].charAt(0).toUpperCase())]);\r\n                }\r\n            }\r\n        }\r\n    }, [props.events, inputRef])\r\n\r\n    useEffect(() => { // Value Override\r\n        if (inputRef && !!props.value) {\r\n            inputRef.value = props.value\r\n        }\r\n    }, [props.value, inputRef]);\r\n\r\n    useEffect(() => {\r\n        if (parentRef.current) setAttributes();\r\n    }, [props.attr, inputRef]);\r\n\r\n    useEffect(() => {\r\n        if (props.value) {\r\n            setLimitCount(String(props.value).length)\r\n        }\r\n        if (props.maxCounter && inputRef) {\r\n            inputRef.setAttribute('maxlength', props.maxCounter);\r\n            inputRef.addEventListener('keyup', counterCalculator);\r\n        }\r\n        return () => {\r\n            inputRef && inputRef.removeEventListener('keyup', counterCalculator);\r\n        }\r\n    }, [props.maxCounter, props.value, inputRef])\r\n\r\n    useEffect(() => { // Set Icon\r\n        if (props.readonly) {\r\n            setIcon({\r\n                className: 'icon-lock',\r\n            })\r\n        } else if (props.errors) {\r\n            setIcon({\r\n                className: 'error-icon icon-warning',\r\n            })\r\n        } else if (props.type === 'password' && props.passwordEye) {\r\n            setIcon({\r\n                className: 'icon-eye toggle-password' + (passwordTypeToggle ? ' icon-eye-blocked' : ''),\r\n                onClick: togglePassword\r\n            })\r\n        } else if (props.icon) {\r\n            setIcon({\r\n                className: props.icon.className + (props.icon.onClick ? ' clickable' : ''),\r\n                ...(props.icon.onClick && {onClick: props.icon.onClick}),\r\n            })\r\n        } else {\r\n            setIcon({})\r\n        }\r\n    }, [props.passwordEye, props.type, props.icon, props.errors, passwordTypeToggle, props.readonly]);\r\n\r\n    const togglePassword = useCallback(() => { // Toggle Password Eye Icon\r\n        setPasswordTypeToggle(!passwordTypeToggle)\r\n    }, [props.passwordEye, passwordTypeToggle]);\r\n\r\n    const calculateMarginBottom = useCallback(() => { // Calculate Margin Bottom\r\n        const bottomElementHeight = errorRef.current ? errorRef.current.offsetHeight + 2 :\r\n            bottomWrapRef.current ? bottomWrapRef.current.offsetHeight + 2 : 0;\r\n        return bottomElementHeight /*marginTopBottom*/\r\n            - (props.transparentInput ? variablesJSS.$input.$transparentInput.$errorDefaultHeight - 4 : 0) + 'px'\r\n    }, [props.required, props.errors, props.transparentInput, errorRef.current, props.helperText, props.maxCounter, bottomWrapRef.current])\r\n\r\n    const calculateIconPosition = useCallback(() => { // Calculate Icon's position\r\n        if (inputRef) {\r\n            return inputRef.offsetTop + (props.textArea ? 12 /*TextArea's middle padding*/ : inputRef.offsetHeight / 2)\r\n        }\r\n    }, [props.errors, inputRef, props.label, icon, props.textArea, props.transparentInput])\r\n\r\n    const setAttributes = useCallback(() => { // Set all attributes\r\n        if (props.attr && inputRef) {\r\n            Object.keys(props.attr).map(name => {\r\n                inputRef.setAttribute(name, props.attr[name])\r\n            })\r\n        }\r\n    }, [props.attr, props.textArea, inputRef])\r\n\r\n    const counterCalculator = useCallback(() => { // Count the limited characters\r\n        setLimitCount(inputRef.value.length)\r\n    }, [inputRef]);\r\n\r\n    // Get position of main Wrapper\r\n    const generateMarginDiv = useCallback(() => UiGenerateMargin(props.margin, props.direction), [props.direction, props.margin]);\r\n\r\n    const inlineStylesParent = useMemo(() => { // Set inline styles on the main Wrapper\r\n        return {\r\n            ...generateMarginDiv(),\r\n            width: props.fullWidth ? `calc(100% - ${UIGetMarginLeftRight(props.margin)}px)` : props.width,\r\n            ...(props.label && {\r\n                display: 'flex',\r\n                flexDirection: 'column'\r\n            }),\r\n            ...(!props.label && {\r\n                display: 'block',\r\n            }),\r\n            ...props.customStylesDiv\r\n        }\r\n    }, [\r\n        props.customStylesDiv,\r\n        props.label,\r\n        props.fullWidth,\r\n        props.direction,\r\n        props.width,\r\n        props.margin]);\r\n\r\n    const icons = useMemo(() => {\r\n        if (icon.className) return (\r\n            <i className={`${icon.className} input-icon`} onClick={icon.onClick}></i>\r\n        )\r\n    }, [props.icon, icon]);\r\n\r\n    const generateClassNameParent = useMemo(() => {\r\n        return `${props.className} ${props.likeMaterialInput ? 'material-input-wrapper' : ''} ${props.transparentInput ? styles['transparent-input-wrap']: ''} ${styles[props.theme ? 'theme-' + props.theme : '']} ${styles['input-wrap']} ${icon.className ? styles['with-icon'] : ''} ${props.errors ? 'error-field' : ''} ${props.type === \"checkbox\" ? styles['wrap-with-checkbox'] : props.type === \"radio\" ? styles['wrap-with-radio'] : ''}`\r\n    }, [props.type, props.errors, props.theme, props.transparentInput, props.className, icon]);\r\n\r\n    const label = useMemo(() => {\r\n        if (props.label) {\r\n            const textLabel = props.label.title + (props.required ? ' *' : '');\r\n            if ((props.type === 'radio' || props.type === 'checkbox') && inputRef && inputWrapperRef.current && labelRef.current) {\r\n                labelRef.current.innerHTML = textLabel;\r\n                inputWrapperRef.current.innerHTML = '';\r\n                const checkBoxWrap = document.createElement('SPAN');\r\n                checkBoxWrap.className = 'checkbox-wrap';\r\n                inputWrapperRef.current.appendChild(inputRef);\r\n                inputWrapperRef.current.appendChild(checkBoxWrap);\r\n                labelRef.current.appendChild(inputWrapperRef.current);\r\n            }\r\n            return (\r\n                <label\r\n                    ref={labelRef}\r\n                    htmlFor={props.type === \"checkbox\" ? props.name : null}\r\n                    className={'label-' + props.size}\r\n                >{textLabel}</label>\r\n            )\r\n        }\r\n    }, [props.required, props.label, inputWrapperRef.current, inputRef]);\r\n\r\n    const bottomWrap = useMemo(() => {\r\n        if ((props.maxCounter || props.helperText || props.required) && !props.errors) {\r\n            const text = props.helperText || (props.required ? 'Required *' : '');\r\n            return (\r\n                <div className=\"bottom-wrap\" ref={bottomWrapRef}>\r\n                    {text && <p className=\"helper-text\">{text}</p>}\r\n                    {props.maxCounter && <span className=\"counter\">{limitCount}/{props.maxCounter}</span>}\r\n                </div>\r\n            )\r\n        } else if (props.errors) return (\r\n            <span ref={errorRef} className={'error-line'}>{props.errors}</span>\r\n        )\r\n    }, [props.helperText, props.errors, props.maxCounter, errorRef, limitCount, props.required]);\r\n\r\n    return (\r\n        <div style={inlineStylesParent}\r\n             className={generateClassNameParent}\r\n             ref={parentRef}>\r\n            {label}\r\n            <div ref={inputWrapperRef} className={'input-element-wrapper'}>\r\n                {props.textArea ? <textarea\r\n                    name={props.name}\r\n                    cols={props.textArea.cols || 30}\r\n                    rows={props.textArea.rows || 5}\r\n                    className={'textarea-' + props.size}\r\n                    style={props.customStylesInput}\r\n                    ref={props.refBind}\r\n                    placeholder={props.placeholder || 'Input text...'}\r\n                    readOnly={props.readonly}\r\n                    tabIndex={props.readonly ? -1 : 0}\r\n                ></textarea> : props.likeMaterialInput ? <TextField\r\n                    readOnly={props.readonly}\r\n                    disabled={props.disabled}\r\n                    placeholder={props.placeholder || ''}\r\n                    className={'input-' + props.size}\r\n                    ref={props.refBind}\r\n                    type={props.type}\r\n                    name={props.name}\r\n                    style={props.customStylesInput}\r\n                /> : <input\r\n                    tabIndex={props.readonly ? -1 : 0}\r\n                    readOnly={props.readonly}\r\n                    style={props.customStylesInput}\r\n                    name={props.name}\r\n                    className={'input-' + props.size}\r\n                    ref={props.refBind}\r\n                    type={(passwordTypeToggle && 'text') || props.type}\r\n                    id={props.type === \"checkbox\" ? props.name : props.id}\r\n                    disabled={props.disabled}\r\n                    placeholder={props.placeholder || ''} />}\r\n                {icons}\r\n            </div>\r\n            {bottomWrap}\r\n        </div>\r\n    )\r\n};\r\n\r\nInput.defaultProps = {\r\n    size: 'md',\r\n    type: 'text',\r\n    fullWidth: false,\r\n    events: [],\r\n    margin: 0,\r\n    required: false,\r\n    readonly: false,\r\n    transparentInput: false,\r\n    theme: 'light',\r\n    customStylesInput: {},\r\n    customStylesDiv: {},\r\n    className: '',\r\n};\r\nInput.propTypes = {\r\n    className: PropTypes.string,\r\n    theme: PropTypes.string,\r\n    readonly: PropTypes.bool,\r\n    likeMaterialInput: PropTypes.bool,\r\n    transparentInput: PropTypes.bool,\r\n    helperText: PropTypes.string,\r\n    direction: PropTypes.string,\r\n    textArea: PropTypes.object,\r\n    required: PropTypes.bool,\r\n    passwordEye: PropTypes.bool,\r\n    fullWidth: PropTypes.bool,\r\n    maxCounter: PropTypes.number,\r\n    size: PropTypes.string,\r\n    id: PropTypes.string,\r\n    refBind: PropTypes.any,\r\n    name: PropTypes.string,\r\n    label: PropTypes.object,\r\n    type: PropTypes.string,\r\n    width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\r\n    errors: PropTypes.string,\r\n    disabled: PropTypes.bool,\r\n    events: PropTypes.array,\r\n    icon: PropTypes.object,\r\n    customStylesDiv: PropTypes.object,\r\n    customStylesInput: PropTypes.object,\r\n    margin: PropTypes.oneOfType([PropTypes.array, PropTypes.number]),\r\n    attr: PropTypes.object,\r\n    value: PropTypes.oneOfType([\r\n        PropTypes.string,\r\n        PropTypes.number\r\n    ]),\r\n    placeholder: PropTypes.string,\r\n};\r\nexport default React.memo(Input);\r\n"]},"metadata":{},"sourceType":"module"}